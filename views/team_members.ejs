<%- include ('../views/includes/head', {pagetitle: 'Register Your Team'}) %> 
    <link rel="stylesheet" href="/CSS/team_members.css">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <style>
        
        #container {
            max-height: 40rem;
            overflow-y: auto; /* Enable vertical scrolling if content overflows */
        }
    </style>
    <script src="/scripts/team_members.js"></script>
</head>
<body>
  <section> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> 
</section>
<div class="container" id="container" style="z-index: 10; padding: 2rem;">
    
    <h1 class="main-heading">Team Information</h1>
    <hr>
    <!-- form start -->
    <form class="form-class" id="teamForm" action="/registerteam" method="POST">
        <input type="hidden" name="_csrf" value="<%= locals.csrfToken %>">
        <!-- Hunt name -->
        <div class="form-control">
            <div class="heading-field">
                <h3 class="field-head">Which Hunt to Register</h3>
            </div>
            <div class="input-div" id="toadd">
                <select name="huntname" id="huntname" class="form-control-input" required>
                    <option value="" disabled selected>Select Hunt</option>
                    <% for(var i=0; i<names.length; i++) { %>
                        <option value="<%= names[i] %>"><%= names[i] %></option>
                    <% } %>
                </select>
            </div>
        </div>
        <!-- Team Name -->
        <div class="form-control">
            <div class="heading-field">
                <h3 class="field-head">Team Name </h3>
            </div>
            <div class="input-div">
                <input type="text" class="form-control-input" id="team-name" name="teamname" required>
                <div class="help-text">Enter Team Name</div>
            </div>
        </div>
        <!-- Team Name Ends -->

        <!-- Team Members -->
        <div class="form-control" id="membersContainer">
            <div class="heading-field">
                <h3 class="field-head">Team Members</h3>
            </div>
            <div id="members" class="field-inputs">
                <div class="member-input">
                    <h4>Member 1</h4>
                    <input type="text" class="form-control-input" placeholder="Enter Team Captain Name" name="Name" required>
                    <input type="text" class="form-control-input" placeholder="Enter Enrollment Number" name = "enrollementNo" required>
                    <input type="tel" class="form-control-input" placeholder="Enter Phone Number" name="phonenumber" required>
                    <input type="email" class="form-control-input" placeholder="Enter Email" name="email" required>
                </div>
                <div class="member-input">
                    <h4>Member 2</h4>
                    <input type="text" class="form-control-input" placeholder="Enter Member Name" name="Name" required>
                    <input type="text" class="form-control-input" placeholder="Enter Enrollment Number" name = "enrollementNo" required>
                    <input type="tel" class="form-control-input" placeholder="Enter Phone Number" name="phonenumber" required>
                    <input type="email" class="form-control-input" placeholder="Enter Email" name="email" required>
                </div>
            </div>
            <button type="button" onclick="addMember()">Add Member</button>
        </div>
        <!-- Team Members Ends --> 

        <!-- Submit Button -->
        <button type="submit" class="center-button">Submit</button>

    </form>
    <!-- form ends -->
</div>

<script>
    function addMember() {
        var memberCount = $("#members .member-input").length + 1;
        var newMember = `
            <div class="member-input" style="display: none;">
                <h4>Member ${memberCount}</h4>
                <input type="text" class="form-control-input" placeholder="Enter Member Name" name="Name" required>
                <input type="text" class="form-control-input" placeholder="Enter Enrollment Number" name = "enrollementNo" required>
                <input type="tel" class="form-control-input" placeholder="Enter Phone Number" name="phonenumber" required>
                <input type="email" class="form-control-input" placeholder="Enter Email" name="email" required>
            </div>
        `;
        $("#members").append(newMember);
        $("#members .member-input:last-child").slideDown();
        
        // Scroll to the newly added member
        $("html, body").animate({
            scrollTop: $("#members .member-input:last-child").offset().top
        }, 500);
    }
</script>

<%- include ('./includes/foot') %>
